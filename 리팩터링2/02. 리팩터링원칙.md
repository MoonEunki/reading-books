# 리팩터링 원칙

## 리팩터링 정의

> 리팩터링은 SW의 겉보기 동작은 그대로 유지한채 코드를 이해하고 수정하기 쉽도록 내부구조를 변경하는 기법

리팩터링하는 동안에는 코드가 항상 정상작동하기때문에 전체작업이 끝나지않아도 언제든 멈출수있다.

누가 리팩터링하다가 코드에 문제생겨서 고생했다고하면 십중팔구 리팩터링이 아니다.

- restructuring : 코드베이스를 정리하거나 구조를 바꾸는 모든작업
- refactoring : restructuring중에서 도중에 중단되어도 동작이 유지되는것

## 두개의 모자

기능추가와 리팩터링을 명확하게 구분하자

기능추가 모자를 썼을때는 기능추가만, 리팩터링모자를 썼을때는 리팩터링만해라

-하지만 현실적으로 어렵다고 생각한다

## 리팩터링 하는 이유

설계가 좋아진다

이해가 쉬워진다

버그를 쉽게 찾을수 있다

결과적으로 프로그래밍 속도를 높일수있다

내부 설계에 심혈을 기울이면 소프트웨어의 지구력이 높아져서 빠르게 개발할수있는 상태를 더 오래지속할수있다.

## 언제 리팩터링해야 할까?

### 준비를 위한 리팩터링

리팩터링하기 가장좋은시점은 기능추가 직전. "리팩터링하면 기능추가가 더 쉬워질까?" 를 고민하자

### 코드리뷰에 리팩터링 활용하기

코드작성자 없을때 하는것보다는 코드작성자와함께 나란히 앉아서 페어프로그래밍하는게 좋다

### 리팩터링시 고려할 문제

테스팅 - 겉보기 동작이 똑같이 유지 되기위해서는 테스트가 필수.

### 리팩터링 하지 말아야 할때

지저분해도 굳이 수정할필요없을때

리팩터링보다 처음부터 다시짜는게 쉬울때

## 리팩터링, 아키텍쳐, 애그니(YAGNI)

미리 추측하지말고 현재요구사항을 최대한 멋지게 해결하도록 설계한다. 유저의 요구사항을 더 잘 이해하게됐을떄 리팩터링해서 바꾼다.

## 리팩터링과 성능

튜닝하기 쉽게 만들고 원하는 속도가 나게끔 튜닝하자.

프로파일러로 프로그램을 분석한뒤 성능에 큰 영향을 주는 작은 부분들을 찾아서 개선하자. 적은노력으로 큰 효과를 볼수있다.
